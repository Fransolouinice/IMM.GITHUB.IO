<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Émetteur Caméra</title>
</head>
<body>
  <h2>🎥 Imm.Anon</h2>
  <video id="myVideo" autoplay playsinline style="width: 100%; max-width: 400px;"></video>

  <p>🆔  : <span id="myId">chargement...</span></p>

  <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
  <script>


    const peer = new Peer();

    peer.on('open', id => {
      document.getElementById('myId').textContent = id;
    });

    navigator.mediaDevices.getUserMedia({ video: true, audio: false })
      .then(stream => {
        document.getElementById('myVideo').srcObject = stream;

        peer.on('call', call => {
          call.answer(stream); // Envoie le flux à celui qui appelle
        });
      })
      .catch(error => {
        alert("Erreur caméra : " + error);
      });

    peer.on('error', err => {
      alert("Erreur PeerJS : " + err);
    });




   
</script>
</script>
</body>
</html>